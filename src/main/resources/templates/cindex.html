<!doctype html>
<html lang="en">
  <head>
  
  
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500&display=swap" rel="stylesheet">

    
    <link rel="stylesheet" href="calendar-20/fonts/icomoon/style.css">
  
    <link href='calendar-20/fullcalendar/packages/core/main.css' rel='stylesheet' />
    <link href='calendar-20/fullcalendar/packages/daygrid/main.css' rel='stylesheet' />
    
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="calendar-20/css/bootstrap.min.css">
    
    <!-- Style -->
    <link rel="stylesheet" href="calendar-20/css/style.css">

    <title>Calendar #10</title>
  </head>
 
  <body >
   
 
  <div id='calendar-container'>
 <div>
 	<a href="/main">메인</a>
 	<a th:href="|/event/insert?party_id=${party_id}|">일정추가</a>
	<hr>
	<table id="insertTable">
			<thead>

					<th:block th:each="pvo : ${plist}">
					<tr><a th:href="|/cindex?party_id=${pvo.party_id}|">[[${pvo.party_id}]]파티 </a></tr>
					<tr><a th:href="|/chat/room2/${pvo.party_id}|">[[${pvo.party_id}]]파티채팅방 </a></tr>				
					</th:block>
			</thead>
			<tbody>				
			</tbody>
		</table>
	</div>
	
	
    <div id='calendar'></div>
  </div>
  
  
    
    

    <script src="calendar-20/js/jquery-3.3.1.min.js"></script>
    <script src="calendar-20/js/popper.min.js"></script>
    <script src="calendar-20/js/bootstrap.min.js"></script>

    <script src='calendar-20/fullcalendar/packages/core/main.js'></script>
    <script src='calendar-20/fullcalendar/packages/interaction/main.js'></script>
    <script src='calendar-20/fullcalendar/packages/daygrid/main.js'></script>
    <script src='calendar-20/fullcalendar/packages/timegrid/main.js'></script>
    <script src='calendar-20/fullcalendar/packages/list/main.js'></script>

    

    <script>
      document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    
    var today = new Date();

    var calendar = new FullCalendar.Calendar(calendarEl, {
      plugins: [ 'interaction', 'dayGrid', 'timeGrid', 'list' ],
      height: 'parent',
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
      },
      defaultView: 'dayGridMonth',
      defaultDate: today,
      navLinks: true, // can click day/week names to navigate views
      editable: true,
      eventLimit: true, // allow "more" link when too many events
      events: [
          $.ajax({
              type: "get",
              url: '/EventList?party_id='+ [[${party_id}]],
              success: function (data) {
                  if (data != null) {
                      for (let i = 0; i < data.length; i++) {
                          calendar.addEvent({
                        	  id: data[i].event_id,
                        	  url: '/event/update?event_id=' + data[i].event_id,
                              title: data[i].event_title,
                              start: data[i].event_startTime,
                              end: data[i].event_endTime
                          })
                      }
                  }
              }
          })
      ]
    });

    calendar.render();
  });

    </script>

    <script src="calendar-20/js/main.js"></script>
  </body>
</html>